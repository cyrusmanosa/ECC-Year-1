/*
データベース演習I 課題8
クラス：SK1A01
制作者：文家俊
作成日：2022/12/01
*/

mysql> source database8.sql
--------------
SELECT  E.EMP_NO,  E.ENAME,  M.EMP_NO,  M.ENAME
FROM  EMPLOYEE AS E
LEFT JOIN   EMPLOYEE AS M  ON ( E.MGR_NO = M.EMP_NO)
ORDER BY E.EMP_NO
--------------

+--------+-----------------+--------+--------------+
| EMP_NO | ENAME           | EMP_NO | ENAME        |
+--------+-----------------+--------+--------------+
| 00001  | 小林友治        | NULL   | NULL         |
| 00002  | 小林圭輔        | 00001  | 小林友治     |
| 00003  | 友保隼平        | 00002  | 小林圭輔     |
| 00004  | 稲田直樹        | 00002  | 小林圭輔     |
| 00005  | 河井ゆずる      | 00002  | 小林圭輔     |
| 00006  | 村上信五        | 00001  | 小林友治     |
| 00007  | 横山裕          | 00006  | 村上信五     |
| 00008  | 大倉忠義        | 00006  | 村上信五     |
| 00009  | 安田章大        | 00006  | 村上信五     |
| 00010  | 丸山隆平        | 00006  | 村上信五     |
| 00011  | 秋元真夏        | 00016  | 升野英知     |
| 00012  | 生田絵梨花      | 00016  | 升野英知     |
| 00014  | 白石麻衣        | 00016  | 升野英知     |
| 00015  | 高山一実        | 00016  | 升野英知     |
| 00016  | 升野英知        | 00001  | 小林友治     |
| 00017  | 松村沙友理      | 00016  | 升野英知     |
| 00018  | 山名文和        | NULL   | NULL         |
| 00019  | 秋山賢太        | NULL   | NULL         |
+--------+-----------------+--------+--------------+
18 rows in set (0.06 sec)

--------------
SELECT  M.WORK_STORE, S.SNAME, M.ENAME, E.EMP_NO,  E.ENAME
FROM EMPLOYEE AS M
LEFT JOIN STORE AS S ON ( M.WORK_STORE = S.STORE_NO )
LEFT JOIN EMPLOYEE AS E ON ( M.MGR_NO = E.EMP_NO )
ORDER BY M.WORK_STORE
--------------

+------------+--------------+-----------------+--------+--------------+
| WORK_STORE | SNAME        | ENAME           | EMP_NO | ENAME        |
+------------+--------------+-----------------+--------+--------------+
| NULL       | NULL         | 秋山賢太        | NULL   | NULL         |
| 001        | 中崎町店     | 小林圭輔        | 00001  | 小林友治     |
| 001        | 中崎町店     | 友保隼平        | 00002  | 小林圭輔     |
| 001        | 中崎町店     | 稲田直樹        | 00002  | 小林圭輔     |
| 001        | 中崎町店     | 河井ゆずる      | 00002  | 小林圭輔     |
| 002        | 森ノ宮店     | 村上信五        | 00001  | 小林友治     |
| 002        | 森ノ宮店     | 横山裕          | 00006  | 村上信五     |
| 002        | 森ノ宮店     | 大倉忠義        | 00006  | 村上信五     |
| 002        | 森ノ宮店     | 安田章大        | 00006  | 村上信五     |
| 002        | 森ノ宮店     | 丸山隆平        | 00006  | 村上信五     |
| 003        | 生駒店       | 小林友治        | NULL   | NULL         |
| 004        | NULL         | 山名文和        | NULL   | NULL         |
| 005        | 阿倍野店     | 秋元真夏        | 00016  | 升野英知     |
| 005        | 阿倍野店     | 生田絵梨花      | 00016  | 升野英知     |
| 005        | 阿倍野店     | 白石麻衣        | 00016  | 升野英知     |
| 005        | 阿倍野店     | 高山一実        | 00016  | 升野英知     |
| 005        | 阿倍野店     | 升野英知        | 00001  | 小林友治     |
| 005        | 阿倍野店     | 松村沙友理      | 00016  | 升野英知     |
+------------+--------------+-----------------+--------+--------------+
18 rows in set (0.01 sec)

--------------
UPDATE EMPLOYEE
SET JOB = '店長',RANK_POINT = '1200',WORK_STORE  = '006',MGR_NO = '00001'
WHERE EMP_NO = '00018'
--------------

Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0

--------------
UPDATE EMPLOYEE
SET JOB = '調理', RANK_POINT = '100', WORK_STORE = '006', MGR_NO ='00018'
WHERE EMP_NO = '00019'
--------------

Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0

--------------
SELECT EMP_NO, ENAME, JOB, RANK_POINT, WORK_STORE, MGR_NO
FROM EMPLOYEE
WHERE EMP_NO >= '00018'
--------------

+--------+--------------+--------+------------+------------+--------+
| EMP_NO | ENAME        | JOB    | RANK_POINT | WORK_STORE | MGR_NO |
+--------+--------------+--------+------------+------------+--------+
| 00018  | 山名文和     | 店長   |       1200 | 006        | 00001  |
| 00019  | 秋山賢太     | 調理   |        100 | 006        | 00018  |
+--------+--------------+--------+------------+------------+--------+
2 rows in set (0.00 sec)

--------------
COMMIT
--------------

Query OK, 0 rows affected (0.01 sec)

--------------
SELECT P.PRODUCT_NO, PNAME, P.PRICE FROM PRODUCT AS P
WHERE P.CATEGORY = 'ピザ'
UNION
SELECT R.PROTOTYPE_NO,R.PROTONAME,R.PRICE FROM PROTOTYPE AS R
--------------

+------------+--------------------------+-------+
| PRODUCT_NO | PNAME                    | PRICE |
+------------+--------------------------+-------+
| 0001       | マルゲリータ             |  1200 |
| 0002       | デラックスピザ           |  1700 |
| 0003       | シーフードピザ           |  1500 |
| 0004       | ギガミート               |  2500 |
| 0005       | チキン＆ベーコン         |  2200 |
| 0006       | BBQチキン                |  2200 |
| 0007       | BBQシーフード            |  3000 |
| 9001       | MAXチーズピザ            |  3000 |
| 9002       | 夏野菜ピザ               |  3000 |
+------------+--------------------------+-------+
9 rows in set (0.02 sec)

--------------
SELECT P.PRODUCT_NO, P.PNAME , M.MNAME , R.QUANTITY
FROM PRODUCT AS P 
LEFT JOIN RECIPE AS R
ON P.PRODUCT_NO = R.PRODUCT_NO
LEFT JOIN MATERIAL AS M 
ON M.MATERIAL_NO = R.MATERIAL_NO
WHERE P.PNAME LIKE '%BBQ%'
--------------

+------------+--------------------+-----------------------+----------+
| PRODUCT_NO | PNAME              | MNAME                 | QUANTITY |
+------------+--------------------+-----------------------+----------+
| 0006       | BBQチキン          | チーズ                |        1 |
| 0006       | BBQチキン          | ローストチキン        |        3 |
| 0006       | BBQチキン          | コーン                |        1 |
| 0006       | BBQチキン          | トマトソース          |        1 |
| 0006       | BBQチキン          | ホワイトソース        |        1 |
| 0007       | BBQシーフード      | NULL                  |     NULL |
+------------+--------------------+-----------------------+----------+
6 rows in set (0.00 sec)

--------------
SELECT R.PRODUCT_NO, P.PNAME , M.MNAME , R.QUANTITY
FROM PRODUCT AS P
RIGHT JOIN RECIPE AS R ON P.PRODUCT_NO = R.PRODUCT_NO
LEFT JOIN MATERIAL AS M ON M.MATERIAL_NO = R.MATERIAL_NO
WHERE P.PNAME IS NULL
--------------

+------------+-------+-----------------------------+----------+
| PRODUCT_NO | PNAME | MNAME                       | QUANTITY |
+------------+-------+-----------------------------+----------+
| 9001       | NULL  | チーズ                      |        1 |
| 9001       | NULL  | モッツァレラチーズ          |        2 |
| 9001       | NULL  | パルメザンチーズ            |        2 |
| 9001       | NULL  | チェダーチーズ              |        2 |
| 9001       | NULL  | ブルーチーズ                |        2 |
| 9001       | NULL  | メイプルソース              |        1 |
| 9002       | NULL  | チーズ                      |        1 |
| 9002       | NULL  | バジル                      |        1 |
| 9002       | NULL  | トマト                      |        1 |
| 9002       | NULL  | ピーマン                    |        1 |
| 9002       | NULL  | オニオン                    |        1 |
| 9002       | NULL  | アスパラガス                |        1 |
| 9002       | NULL  | コーン                      |        1 |
| 9002       | NULL  | ナス                        |        1 |
| 9002       | NULL  | ホワイトソース              |        1 |
| 9003       | NULL  | チーズ                      |        1 |
| 9003       | NULL  | パルメザンチーズ            |        1 |
| 9003       | NULL  | シーフードミックス          |        1 |
| 9003       | NULL  | トマト                      |        1 |
| 9003       | NULL  | ピーマン                    |        1 |
| 9003       | NULL  | バーベキューソース          |        1 |
+------------+-------+-----------------------------+----------+
21 rows in set (0.00 sec)

--------------
SELECT P.PROTOTYPE_NO, P.PROTONAME , M.MNAME , R.QUANTITY
FROM PROTOTYPE AS P
LEFT JOIN RECIPE AS R ON P.PROTOTYPE_NO = R.PRODUCT_NO
LEFT JOIN MATERIAL AS M ON M.MATERIAL_NO = R.MATERIAL_NO
--------------

+--------------+--------------------+-----------------------------+----------+
| PROTOTYPE_NO | PROTONAME          | MNAME                       | QUANTITY |
+--------------+--------------------+-----------------------------+----------+
| 9001         | MAXチーズピザ      | チーズ                      |        1 |
| 9001         | MAXチーズピザ      | モッツァレラチーズ          |        2 |
| 9001         | MAXチーズピザ      | パルメザンチーズ            |        2 |
| 9001         | MAXチーズピザ      | チェダーチーズ              |        2 |
| 9001         | MAXチーズピザ      | ブルーチーズ                |        2 |
| 9001         | MAXチーズピザ      | メイプルソース              |        1 |
| 9002         | 夏野菜ピザ         | チーズ                      |        1 |
| 9002         | 夏野菜ピザ         | バジル                      |        1 |
| 9002         | 夏野菜ピザ         | トマト                      |        1 |
| 9002         | 夏野菜ピザ         | ピーマン                    |        1 |
| 9002         | 夏野菜ピザ         | オニオン                    |        1 |
| 9002         | 夏野菜ピザ         | アスパラガス                |        1 |
| 9002         | 夏野菜ピザ         | コーン                      |        1 |
| 9002         | 夏野菜ピザ         | ナス                        |        1 |
| 9002         | 夏野菜ピザ         | ホワイトソース              |        1 |
+--------------+--------------------+-----------------------------+----------+
15 rows in set (0.00 sec)

--------------
UPDATE RECIPE SET PRODUCT_NO = '0007' WHERE PRODUCT_NO = '9003'
--------------

Query OK, 6 rows affected (0.00 sec)
Rows matched: 6  Changed: 6  Warnings: 0

--------------
SELECT R.PRODUCT_NO,P.PNAME,M.MNAME,R.QUANTITY
FROM RECIPE  AS R
LEFT JOIN PRODUCT AS P ON (P.PRODUCT_NO = R.PRODUCT_NO)
LEFT JOIN MATERIAL AS M ON (M.MATERIAL_NO = R.MATERIAL_NO)
WHERE R.PRODUCT_NO = '0007'
--------------

+------------+--------------------+-----------------------------+----------+
| PRODUCT_NO | PNAME              | MNAME                       | QUANTITY |
+------------+--------------------+-----------------------------+----------+
| 0007       | BBQシーフード      | チーズ                      |        1 |
| 0007       | BBQシーフード      | パルメザンチーズ            |        1 |
| 0007       | BBQシーフード      | シーフードミックス          |        1 |
| 0007       | BBQシーフード      | トマト                      |        1 |
| 0007       | BBQシーフード      | ピーマン                    |        1 |
| 0007       | BBQシーフード      | バーベキューソース          |        1 |
+------------+--------------------+-----------------------------+----------+
6 rows in set (0.00 sec)

--------------
COMMIT
--------------

Query OK, 0 rows affected (0.01 sec)

mysql> notee
