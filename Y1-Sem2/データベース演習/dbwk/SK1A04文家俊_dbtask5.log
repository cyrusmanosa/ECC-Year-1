/*
データベース演習I 課題5
クラス：SK1A 04
制作者：文家俊
作成日：2020/11/10
*/

mysql> source database5.sql
--------------
SELECT DATE_FORMAT(NOW(),'%y/%m/%e %H:%i:%s') 現在日付  FROM DUAL
--------------

+-------------------+
| 現在日付          |
+-------------------+
| 22/11/10 10:49:04 |
+-------------------+
1 row in set (0.00 sec)

--------------
SELECT * FROM PROTOTYPE
--------------

+--------------+-----------------------------------+----------+-------+
| PROTOTYPE_NO | PROTONAME                         | CATEGORY | PRICE |
+--------------+-----------------------------------+----------+-------+
| 9001         | MAXチーズピザ                     | ピザ     |  3000 |
| 9002         | 夏野菜ピザ                        | ピザ     |  3000 |
| 9003         | バーベキューシーフード            | ピザ     |  3000 |
+--------------+-----------------------------------+----------+-------+
3 rows in set (0.04 sec)

--------------
INSERT INTO PRODUCT(PRODUCT_NO,PNAME,CATEGORY, PRICE)
VALUES ('0007','バーベキューシーフード','ピザ','3000')
--------------

Query OK, 1 row affected (0.00 sec)

--------------
SELECT * FROM PRODUCT
WHERE PRODUCT_NO='0007'
--------------

+------------+-----------------------------------+----------+-------+
| PRODUCT_NO | PNAME                             | CATEGORY | PRICE |
+------------+-----------------------------------+----------+-------+
| 0007       | バーベキューシーフード            | ピザ     |  3000 |
+------------+-----------------------------------+----------+-------+
1 row in set (0.00 sec)

--------------
DELETE FROM PROTOTYPE
WHERE PROTOTYPE_NO='9003'
--------------

Query OK, 1 row affected (0.00 sec)

--------------
SELECT * FROM PROTOTYPE
--------------

+--------------+--------------------+----------+-------+
| PROTOTYPE_NO | PROTONAME          | CATEGORY | PRICE |
+--------------+--------------------+----------+-------+
| 9001         | MAXチーズピザ      | ピザ     |  3000 |
| 9002         | 夏野菜ピザ         | ピザ     |  3000 |
+--------------+--------------------+----------+-------+
2 rows in set (0.00 sec)

--------------
COMMIT
--------------

Query OK, 0 rows affected (0.01 sec)

--------------
SELECT PRODUCT_NO,PNAME FROM PRODUCT
WHERE CHAR_LENGTH(PNAME) >= 9
--------------

+------------+-----------------------------------+
| PRODUCT_NO | PNAME                             |
+------------+-----------------------------------+
| 0006       | バーベキューチキン                |
| 1013       | ストロベリーアイス                |
| 0007       | バーベキューシーフード            |
+------------+-----------------------------------+
3 rows in set (0.00 sec)

--------------
UPDATE PRODUCT SET PNAME = REPLACE(PNAME,'バーベキュー','BBQ')
--------------

Query OK, 2 rows affected (0.00 sec)
Rows matched: 32  Changed: 2  Warnings: 0

--------------
SELECT * FROM PRODUCT
WHERE  PNAME  LIKE  '%BBQ%'
--------------

+------------+--------------------+----------+-------+
| PRODUCT_NO | PNAME              | CATEGORY | PRICE |
+------------+--------------------+----------+-------+
| 0006       | BBQチキン          | ピザ     |  2200 |
| 0007       | BBQシーフード      | ピザ     |  3000 |
+------------+--------------------+----------+-------+
2 rows in set (0.00 sec)

--------------
COMMIT
--------------

Query OK, 0 rows affected (0.01 sec)

--------------
SELECT CATEGORY,PNAME,TRUNCATE(PRICE*85/100,0) AS 'PRICE' 
FROM PRODUCT
ORDER BY PRODUCT_NO
--------------

+--------------+-----------------------------+-------+
| CATEGORY     | PNAME                       | PRICE |
+--------------+-----------------------------+-------+
| ピザ         | マルゲリータ                |  1020 |
| ピザ         | デラックスピザ              |  1445 |
| ピザ         | シーフードピザ              |  1275 |
| ピザ         | ギガミート                  |  2125 |
| ピザ         | チキン＆ベーコン            |  1870 |
| ピザ         | BBQチキン                   |  1870 |
| ピザ         | BBQシーフード               |  2550 |
| サイド       | ポテトフライ                |   323 |
| サイド       | コンソメポテト              |   323 |
| サイド       | バターポテト                |   323 |
| サイド       | チキンナゲット              |   382 |
| サイド       | シーザーサラダ              |   467 |
| サイド       | ごまだれサラダ              |   433 |
| サイド       | コーンポタージュ            |   178 |
| サイド       | クラムチャウダー            |   204 |
| サイド       | ミネストローネ              |   204 |
| サイド       | エッグタルト                |   221 |
| サイド       | アップルパイ                |   212 |
| サイド       | バニラアイス                |   314 |
| サイド       | ストロベリーアイス          |   314 |
| サイド       | ポテトサラダ                |   433 |
| ドリンク     | コーラ                      |   136 |
| ドリンク     | ゼロコーラ                  |   136 |
| ドリンク     | ジンジャエール              |   136 |
| ドリンク     | メロンソーダ                |   136 |
| ドリンク     | カフェラテ                  |   136 |
| ドリンク     | コーヒー                    |   136 |
| ドリンク     | オレンジジュース            |   136 |
| ドリンク     | アップルジュース            |   136 |
| その他       | タバスコ                    |   212 |
| その他       | 保温バック                  |   425 |
| その他       | エコバック                  |   340 |
+--------------+-----------------------------+-------+
32 rows in set (0.00 sec)

--------------
INSERT INTO EMPLOYEE(EMP_NO,ENAME,BIRTHDAY,TEL,ADDRESS,HIREDATE,JOB,RANK_POINT,SALARY,WORK_STORE,MGR_NO)
VALUES ('00017','松村沙友理','1992-8-27','0332229876','東京都港区南青山１―２４',DATE_ADD( NOW(), INTERVAL -14 DAY ),'配達','0','850','005','00016')
--------------

Query OK, 1 row affected, 1 warning (0.00 sec)

--------------
SELECT * FROM EMPLOYEE 
WHERE EMP_NO='00017'
--------------

+--------+-----------------+------------+------------+--------------------------------------+------------+--------+------------+--------+------------+--------+
| EMP_NO | ENAME           | BIRTHDAY   | TEL        | ADDRESS                              | HIREDATE   | JOB    | RANK_POINT | SALARY | WORK_STORE | MGR_NO |
+--------+-----------------+------------+------------+--------------------------------------+------------+--------+------------+--------+------------+--------+
| 00017  | 松村沙友理      | 1992-08-27 | 0332229876 | 東京都港区南青山１―２４              | 2022-10-27 | 配達   |          0 |    850 | 005        | 00016  |
+--------+-----------------+------------+------------+--------------------------------------+------------+--------+------------+--------+------------+--------+
1 row in set (0.00 sec)

--------------
COMMIT
--------------

Query OK, 0 rows affected (0.01 sec)

--------------
SELECT ENAME,CONCAT('XXXXXXX',SUBSTR(TEL,7,4)) AS TEL,JOB,CONCAT( HIREDATE,' 入社') AS 'HIREDATE'
FROM EMPLOYEE
WHERE WORK_STORE = '005'
--------------

+-----------------+-------------+--------+-------------------+
| ENAME           | TEL         | JOB    | HIREDATE          |
+-----------------+-------------+--------+-------------------+
| 秋元真夏        | XXXXXXX2222 | 調理   | 2015-05-10 入社   |
| 生田絵梨花      | XXXXXXX3333 | 配達   | 2015-05-10 入社   |
| 白石麻衣        | XXXXXXX5555 | 調理   | 2016-10-01 入社   |
| 高山一実        | XXXXXXX6666 | 受付   | 2015-09-25 入社   |
| 升野英知        | XXXXXXX1234 | 店長   | 2020-09-01 入社   |
| 松村沙友理      | XXXXXXX9876 | 配達   | 2022-10-27 入社   |
+-----------------+-------------+--------+-------------------+
6 rows in set (0.00 sec)

--------------
SELECT ENAME,DATEDIFF(NOW(),HIREDATE) AS '在籍日数'
FROM EMPLOYEE
WHERE WORK_STORE='005'
--------------

+-----------------+--------------+
| ENAME           | 在籍日数     |
+-----------------+--------------+
| 秋元真夏        |         2741 |
| 生田絵梨花      |         2741 |
| 白石麻衣        |         2231 |
| 高山一実        |         2603 |
| 升野英知        |          800 |
| 松村沙友理      |           14 |
+-----------------+--------------+
6 rows in set (0.00 sec)

--------------
UPDATE EMPLOYEE SET RANK_POINT = '100'
WHERE DATEDIFF(NOW(),HIREDATE) < 30
--------------

Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0

--------------
SELECT EMP_NO,ENAME,RANK_POINT FROM EMPLOYEE 
WHERE RANK_POINT = '100'
--------------

+--------+-----------------+------------+
| EMP_NO | ENAME           | RANK_POINT |
+--------+-----------------+------------+
| 00017  | 松村沙友理      |        100 |
+--------+-----------------+------------+
1 row in set (0.00 sec)

mysql> notee
